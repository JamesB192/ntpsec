= TO DO =

== Checklist for a quality first release ==

=== Code ===

* The waf build needs to be landed and solid.

* clock_gettime() is a minor porting issue that may need a shim on
some target platforms.  Gary Miller removed a little too quickly some 
shims present in NTP classic; these may need to be reverted back in.

* ntpdc should get dropped.  This has ramifications not so much in
other code as in the documentation, which is going to need minor but
widespread edits to reflect reality when it's gone.

* autogen has only been partway removed.  It needs to be ripped out
the rest of the way - not a hard task, really, but a messy one that
is interwined with some ill-scoped documentation and build issues.
(It also involves writing tests for the new option-processing logic.)

=== Testing ===

* Unit testing.  "make check" needs to run all the unit tests.

* Build testing.  The build/CI farm beeds to be fully operational.

* Live testing.  Somebody configuration than needs to take the
development branch, build it on a real machine, and live-test it to
make sure that it issues sane corrections and doesn't core-dump or
barf.

=== Documentation ===

The documentation is a stale, untidy, duplicative mess only partway
converted to asciidoc.

* Check completion on the conversion of the HTML docs.

* The rest of the in-tree documentation must be lifted to asciidoc

* We need to land the whole document conversion in the main repo.

* A serious content-editing and update pass on the documents.  

* Part of d) is the ntp -> ntps name change.

* Phabricator-centered workflow needs to be written up and integrated
  with the website content I wrote for us.

* Website needs to be integrated (with a contacts and services page,
  among other things) and published.

* Decent build and package-dependency documentation.

=== Remaining procedural issues ===

* The dev changes need to be fed through through Phabricator,
reviewed, and if necessary fixed.

* Version-numbering policy needs to be decided and written up.

* We need a release checklist.

== Relatively new items ==

* The portability shims for the case where there is no OpenSSL library installed
  are dodgy.  Get rid of them, it's a safe dependency.  The MD5 implementation
  in the in-tree copy of the ISC library can probably go with it.

* Make OpenSSL a required dependenxy and remove the in-tree shims to simulate it.

Hal:
> I think there is some interaction between when the ACTS driver calls and the 
> state of other stuff, like the connection to the net.  This is probably a 
> good candidate to get cleaned up.
> 
> There is another possible tangle in this area.  If you set "noselect" on the 
> server line in the config file, ntpd goes through all the action of 
> collecting the data and writing log files, but then drops the clock.  I don't 
> know things well enough to be sure that this sort of logic won't pick one 
> back up.

== Old, sometime ancient stuff ==

      *** IF YOU CAN HELP FIX ANY OF THESE THINGS, PLEASE DO! ***

010402: Look harder at -lm and -lelf - they are needed less and less...

970711: Look Real Hard at changing the key stuff from u_long to u_int32.

970711: Make sure it's safe to convert proto_config's 2nd argument from
	u_long to u_int32.  Watch "set" in ntp_request.c:setclr_flags().

970318: in hourly_stats(?), squawk if the magnitude of the drift is,
	say, >400.

970301: Implement the utmp/wtmp timestamping on time steps.

970210: Find a way to dump the current configuration to either syslog or
	a file.

Problems that need to be fixed:

- Get rid of the old SYS_* macros:
  (It's worth noting that any code that would have been "enabled" by any
  of these macros has not been used since 5.83, and there have been very
  few complaints...)

  SYS_44BSD:
   authstuff/md5driver.c

  SYS_BSDI:
   authstuff/md5driver.c

  SYS_DECOSF1:
   util/ntptime.c

  SYS_DOMAINOS:
   parseutil/dcfd.c
   xntpd/ntpd.c

  SYS_HPUX:
   kernel/sys/ppsclock.h
   ntpdate/ntpdate.c
   ntptrace/ntptrace.c

  SYS_PTX:
   libntp/machines.c

  SYS_SOLARIS:
   libparse/parse.c
   libparse/clk_trimtsip.c
   xntpd/ntp_io.c
   xntpd/ntp_refclock.c
   xntpd/ntpd.c

  SYS_SUNOS4:
   libparse/parse.c
   libparse/clk_trimsip.c

  SYS_WINNT:
   include/ntp.h
   include/ntp_fp.h
   include/ntp_machine.h
   include/ntp_select.h
   include/ntp_syslog.h
   include/ntp_unixtime.h
   include/ntpd.h
   libntp/libntp.mak
   libntp/machines.c
   libntp/mexit.c
   libntp/msyslog.c
   libntp/systime.c
   ntpdate/ntpdate.c
   ntpdate/ntpdate.mak
   ntpq/ntpq.c
   ntpq/ntpq.mak
   ntpq/ntpq_ops.c
   ntptrace/ntptrace.c
   ntptrace/ntptrace.mak
   xntpd/ntp_config.c
   xntpd/ntp_filegen.c
   xntpd/ntp_intres.c
   xntpd/ntp_io.c
   xntpd/ntp_loopfilter.c
   xntpd/ntp_peer.c
   xntpd/ntp_proto.c
   xntpd/ntp_refclock.c
   xntpd/ntp_timer.c
   xntpd/ntp_unixclock.c
   xntpd/ntp_util.c
   xntpd/ntpd.c
   xntpd/xntpd.mak
   xntpdc/ntpdc.c
   xntpdc/xntpdc.mak

- config.guess might need help to identify:

  Fujitsu's UXP				--enable-adjtime-is-accurate
					--enable-step-slew

  Unixware				--enable-adjtime-is-accurate
					--enable-tick=10000
					--enable-tickadj=80
					--enable-udp-wildcard
					--disable-step-slew

  DomainOS				--enable-adjtime-is-accurate
					--disable-kmem
					--enable-tick=1000000

  OpenVMS				--enable-slew-always
					--enable-hourly-todr-sync

  Is adjtime accurate on ALL sysv4* machines?
  Can we identify DomainOS with *-apollo-* ?
  Do we catch all Unixware machines with *-univel-sysv* ?

- Combine enable-step-slew and enable-ntpdate-step

- Make sure enable-hourly-todr-sync is always disabled
  What about NextStep and OpenVMS, where hourly TODR sync used to be enabled?

- Check dcfd.c for variables that need to be volatile.
